server:
  port: 28081
  host: "0.0.0.0"

# 数据库配置
database:
  source:
    host: "mysql"
    port: 3306
    user: "haios_d2vm"
    password: "haios_asimov"
    database: "haios_db"

  target:
    host: "43.138.201.159"
    port: 3306
    user: "beilimosik_backup"
    password: "YsncYiBhWQtdbwzH"
    database: "beilimosik_backup"

# 同步配置
sync:
  batch_size: 1000
  interval: 300
  sync_mode: "incremental"

  table_pairs:
    # 1. 父表 - ResourceGroup
    # 注意：根据之前的Python代码，ResourceGroup 似乎没有 updated_at 字段。
    # 如果确实没有，请保持 "checksum"。如果有，可以改为 "update_time"。
    - source: "node_resourcegroup"
      target: "node_resourcegroup"
      check_method: "checksum"

    # 2. 子表 - Node
    # 已修复 updated_at 问题，改回高效同步
    - source: "node_node"
      target: "node_node"
      check_method: "update_time"
      update_field: "updated_at"

    # 3. Image
    - source: "image_image"
      target: "image_image"
      check_method: "update_time"
      update_field: "updated_at"

    # 4. Container
    - source: "container_container"
      target: "container_container"
      check_method: "update_time"
      update_field: "updated_at"

    # 5. User
    # 假设 User 表也有 updated_at 或 last_login 等字段
    - source: "user"
      target: "user"
      check_method: "update_time"
      update_field: "updated_at"
